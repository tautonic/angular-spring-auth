<div id="discussions" class="container" ng-show="!hide">
    <div class="row">
        <h1 ng-show="hasContent">{{discussion.title}}</h1>
        <div class="post">
            <div class="user">
                <p><a ng-href="#/profile/{{discussion.creator._id}}">{{discussion.creator.username}}</a></p>
                <img ng-src="{{discussion.creator.thumbnail}}">
            </div>
            <p class="content" ng-bind-html="discussion.message" ng-show="!discussion.edit">{{discussion.message}}</p>
            <div class="content" ng-show="discussion.edit">
                <form ng-submit="editPost(discussion)">
                    <textarea style="width: 100%; height: 50px;" ng-model="discussion.edited" ui-tinymce></textarea>
                    <input type="submit" value="Save" class="btn">
                    <input type="button" ng-click="cancelEdit(discussion)" value="Cancel" class="btn">
                </form>
            </div>
            <div class="buttons clear"><button ng-click="replyTo()" class="btn">Reply</button><button ng-click="replyTo(discussion.message)" class="btn">Quote</button><button ng-click="edit(discussion)" ng-show="canEdit(discussion)" class="btn">Edit</button></div>
        </div>

        <div class="post threaded" ng-repeat="post in discussion.children">
            <div class="user">
                <p><a ng-href="#/profile/{{post.creator._id}}">{{post.creator.username}}</a></p>
                <img ng-src="{{post.creator.thumbnail}}">
            </div>
            <p class="content" ng-bind-html="post.message" ng-show="!post.edit">{{post.message}}</p>
            <div class="content" ng-show="post.edit">
                <form ng-submit="editPost(post)">
                    <textarea rows="10" ng-model="post.edited" ui-tinymce></textarea>
                    <input type="submit" value="Save" class="btn">
                    <input type="button" ng-click="cancelEdit(post)" value="Cancel" class="btn">
                </form>
            </div>
            <div class="buttons clear"><button ng-click="replyTo()" class="btn">Reply</button><button ng-click="replyTo(post.message)" class="btn">Quote</button><button ng-click="edit(post)" ng-show="canEdit(post)" class="btn">Edit</button></div>

        </div>
        <button ng-click="replyTo()" class="btn">Reply</button>

    </div>
    <div class="reply" ng-show="reply.show">
        <form name="replyForm" ng-submit="submitReply()">
            <fieldset class="control-group">
                <p>{{enterReply}}:</p>
                <textarea rows="10" cols="100" ng-model="reply.message" required ui-tinymce>
                </textarea>
                <br>
                <input type="submit" value="Reply" class="btn" ng-disable="replyForm.$invalid">
                <input type="button" ng-click="cancel()" value="Cancel" class="btn">
            </fieldset>
        </form>
    </div>
</div>