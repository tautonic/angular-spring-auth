
<div ng-show="allThreads">
    <div class="discussion-thread" ng-repeat="thread in discussion">
        <a ng-href="#/discussion/{{thread.id}}">{{thread.title}}</a>
        <div class="started-by">Started by: {{thread.posts[0].owner.username}}</div>
    </div>
</div>

<div ng-show="new">
    <div class="reply">
        <form name="newDiscussionForm" ng-submit="createDiscussion()">
            Discussion Title: <input type="text" ng-model="reply.title">
            <p>Words go here:</p>
            <textarea rows="15" cols="60" ng-model="reply.content" required>
            </textarea>
            <br>
            <input type="submit" value="Start New Discussion">
            <input type="button" ng-click="cancel()" value="Cancel">
        </form>
    </div>
</div>

<div ng-show="singleThread">
    <h1>{{discussion.title}}</h1>
    <div class="post" ng-repeat="post in discussion.posts">
        <div class="user">
            <p>{{post.owner.username}}</p>
            <img ng-src="{{post.owner.picture}}">
        </div>
        <p class="content" ng-bind-html="post.content" ng-show="!post.edit"></p>
        <div class="content" ng-show="post.edit">
            <form ng-submit="editPost(post)">
                <textarea style="width: 100%; height: 50px;" ng-model="post.edited"></textarea>
                <input type="submit" value="Save">
                <input type="button" ng-click="cancelEdit(post)" value="Cancel">
            </form>
        </div>
        <div class="buttons clear"><button ng-click="replyTo(post.content)">Quote</button><button ng-click="edit(post)" ng-show="canEdit(post)">Edit</button></div>

    </div>
    <button ng-click="replyTo()">Reply</button>
    <div class="reply" ng-show="reply.show">
        <form name="replyForm" ng-submit="submitReply()">
            <p>Enter reply here:</p>
            <textarea rows="15" cols="60" ng-model="reply.content" required>
            </textarea>
            <br>
            <input type="submit" value="Reply">
            <input type="button" ng-click="cancel()" value="Cancel">
        </form>
    </div>
</div>