<div class="profile clearfix thumbnail">
<form name="editProfile" class="form-horizontal" novalidate>
<fieldset>
    <legend><h2>{{profile.name.given}} {{profile.name.surname}}</h2> <h6>{{profile._id}}</h6></legend>
    <div class="control-group">
        <h2>Basic</h2>
        <label class="control-label" for="username-update">Username</label>
        <div class="controls">
            <input type="text"
                   ng-model="profile.username"
                   class="input-xlarge"
                   id="username-update"
                   name="username-update"
                   value="{{profile.username}}"
                   username-validator >
        </div>
        <br>
        <label class="control-label" for="given-name">First Name</label>
        <div class="controls">
            <input type="text"
                   ng-model="profile.name.given"
                   class="input-xlarge"
                   id="given-name"
                   name="given-name"
                   validation-tooltip
                   value="{{profile.name.given}}" required>
        </div>
        <br>
        <label class="control-label" for="surname">Last Name</label>
        <div class="controls">
            <input type="text"
                   ng-model="profile.name.surname"
                   class="input-xlarge"
                   id="surname"
                   name="surname"
                   validation-tooltip
                   value="{{profile.name.surname}}" required>
        </div>
        <br>
        <label class="control-label" for="new-password">Enter New Password</label>
        <div class="controls">
            <input type="password"
                   ng-model="profile.newPass"
                   class="input-xlarge"
                   id="new-password"
                   name="new-password"
                   value="">
        </div>
        <br>
        <label class="control-label" for="repeat-password">Repeat New Password</label>
        <div class="controls">
            <input type="password"
                   ng-model="profile.newPassRepeat"
                   class="input-xlarge"
                   id="repeat-password"
                   name="repeat-password"
                   password-validator="new-password"
                   value="">
        </div>
        <br>

        <h2>Contact
            <button class="btn btn-success" ng-click="addContactRow()">
                <i class="icon-plus icon-white"></i> Add
            </button>
        </h2>
        <label class="control-label" for="email">Email</label>
        <div class="controls">
            <input type="email"
                   ng-model="profile.accountEmail.address"
                   class="input-xlarge"
                   id="email"
                   name="address"
                   email-validator
                   value="{{profile.accountEmail.address}}" >
        </div>
        <br>

        <div class="well" ng-repeat="website in profile.websites">
            <label class="control-label" for="website-title">Website Title</label>
            <div class="controls">
                <input type="text"
                       ng-model="website.title"
                       class="input-xlarge"
                       id="website-title"
                       name="website-title"
                       value="{{website.title}}">
            </div>
            <br>
            <label class="control-label" for="website-url">URL</label>
            <div class="controls">
                <input type="text"
                       ng-model="website.url"
                       class="input-xlarge"
                       id="website-url"
                       name="website-url"
                       value="{{website.url}}">
            </div>
        </div>

        <h2>Institution (Work)</h2>

        <label class="control-label" for="title">Title</label>
        <div class="controls">
            <input type="text"
                   ng-model="profile.workHistory[0].title"
                   class="input-xlarge"
                   id="title"
                   name="title"
                   validation-tooltip
                   value="{{profile.workHistory[0].title}}" required>
        </div>
        <br>

        <label class="control-label" for="location">Location</label>
        <div class="controls">
            <input type="text"
                   ng-model="profile.workHistory[0].location"
                   class="input-xlarge"
                   id="location"
                   name="location"
                   validation-tooltip
                   value="{{profile.workHistory[0].location}}" required>
        </div>
        <br>

        <label class="control-label" for="institution-name">Institution Name</label>
        <div class="controls">
            <input type="text"
                   ng-model="profile.workHistory[0].businessName"
                   class="input-xlarge"
                   id="institution-name"
                   name="location"
                   validation-tooltip
                   value="{{profile.workHistory[0].businessName}}">
        </div>

        <br>
        <label class="control-label" for="year-started">Year Started</label>
        <div class="controls">
            <input type="text"
                   ng-model="profile.workHistory[0].yearStarted.gregorian"
                   class="input-xlarge"
                   id="year-started"
                   name="year-finished"
                   validation-tooltip
                   value="{{profile.workHistory[0].yearStarted.gregorian}}" required>
        </div>
        <br>

        <label class="control-label" for="year-finished">Year Finished</label>
        <div class="controls">
            <input type="text"
                   ng-model="profile.workHistory[0].yearFinished.gregorian"
                   class="input-xlarge"
                   id="year-finished"
                   name="year-finished"
                   value="{{profile.workHistory[0].yearFinished.gregorian}}">
        </div>

        <h2>
            Education
            <button class="btn btn-success" ng-click="addEdRow()">
                <i class="icon-plus icon-white"></i> Add</button>
        </h2>

        <div class="well edu-history clearfix" ng-repeat="school in profile.educationHistory">
            <label class="control-label" for="vitae-institution-name-{{$index}}">Institution Name</label>
            <div class="controls">
                <input type="text"
                       ng-model="school.schoolName"
                       class="input-xlarge"
                       id="vitae-institution-name-{{$index}}"
                       name="vitae-institution-name-{{$index}}"
                       value="{{school.schoolName}}">
            </div>
            <br>

            <label class="control-label" for="degree">Degree</label>
            <div class="controls">
                <input type="text"
                       ng-model="school.degree"
                       class="input-xlarge"
                       id="degree"
                       name="degree"
                       validation-tooltip
                       value="{{school.degree}}" required>
            </div>
            <br>

            <label class="control-label" for="field-of-study">Field Of Study</label>
            <div class="controls">
                <input type="text"
                       ng-model="school.fieldOfStudy"
                       class="input-xlarge"
                       id="field-of-study"
                       name="field-of-study"
                       validation-tooltip
                       value="{{school.fieldOfStudy}}" required>
            </div>
            <button class="btn btn-danger remove" ng-hide=$first ng-click="removeEdRow($index)">
                <i class="icon-remove icon-white"></i> Remove</button>
        </div>
    </div>
</fieldset>

<hr>

<h2>Profile Image</h2>

<div id="update" pykl-upload="{dropTarget:'drop-target'}">
    <img src="{{profile.thumbnail}}" id="drop-target" />
</div>

<div class="modal hide fade">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>Crop your image</h3>
    </div>
    <div class="modal-body">
        <img id="image-crop" src="" alt="">
    </div>
    <div class="modal-footer">
        <button id="cancel-crop" class="btn btn-danger"><i class="icon-ban-circle icon-white"></i> Cancel</button>
        <button id="save-crop" class="btn btn-success"><i class="icon-ok icon-white"></i> Crop</button>
    </div>
</div>

<div id="container">
    <br>
    <div id="filelist"></div>
    <br />
    <button class="btn btn-primary" id="choose-files"><i class="icon-folder-open icon-white"></i> Browse</button>
    <!--<button class="btn btn-success" id="upload-files"><i class="icon-upload icon-white"></i> Upload files</button>-->
</div>

<br><br>

<hr>

<button class="btn btn-success" ng-click="update(profile)" ng-disabled="editProfile.$invalid">
    <i class="icon-pencil icon-white"></i> Update</button>
<a ng-href="#/profiles/view/{{profile._id}}" class="btn btn-warning"><i class="icon-ban-circle icon-white"></i> Cancel</a>
</form>
</div>