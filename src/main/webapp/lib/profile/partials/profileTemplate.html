<div class="profile clearfix thumbnail" ng-show="isEditMode">
    <form name="editProfile" class="form-horizontal" novalidate>
        <fieldset>
            <legend><h2>{{profile.name.given}} {{profile.name.surname}}</h2> <h6>{{profile._id}}</h6></legend>
            <div class="control-group">
                <h2>Basic</h2>
                <label class="control-label" for="username">Username</label>
                <div class="controls">
                    <input type="text"
                           ng-model="profile.username"
                           class="input-xlarge"
                           id="username"
                           name="username"
                           value="{{profile.username}}" required>
                </div>
                <br>
                <label class="control-label" for="given-name">First Name</label>
                <div class="controls">
                    <input type="text"
                           ng-model="profile.name.given"
                           class="input-xlarge"
                           id="given-name"
                           name="given-name"
                           value="{{profile.name.given}}" required>
                </div>
                <br>
                <label class="control-label" for="surname">Last Name</label>
                <div class="controls">
                    <input type="text"
                           ng-model="profile.name.surname"
                           class="input-xlarge"
                           id="surname"
                           name="surname"
                           value="{{profile.name.surname}}" required>
                </div>
                <br>
                <label class="control-label" for="password">Enter New Password</label>
                <div class="controls">
                    <input type="password"
                           ng-model="profile.newPass"
                           class="input-xlarge"
                           id="new-password"
                           name="new-password"
                           value="">
                </div>
                <br>
                <label class="control-label" for="repeat-password">Repeat New Password</label>
                <div class="controls">
                    <input type="password"
                           ng-model="profile.newPassRepeat"
                           class="input-xlarge"
                           id="repeat-password"
                           name="repeat-password"
                           password-validator="new-password"
                           value="">
                </div>
                <br>

                <h2>Contact</h2>
                <label class="control-label" for="email">Email</label>
                <div class="controls">
                    <input type="email"
                           ng-model="profile.accountEmail.address"
                           ng-change="emailChanged()"
                           class="input-xlarge"
                           id="email"
                           name="address"
                           value="{{profile.accountEmail.address}}" required>
                </div>
                <br>

                <div class="well" ng-repeat="website in profile.websites">
                    <label class="control-label" for="website-title">Website Title</label>
                    <div class="controls">
                        <input type="text"
                               ng-model="website.title"
                               class="input-xlarge"
                               id="website-title"
                               name="website-title"
                               value="{{website.title}}">
                    </div>
                    <br>
                    <label class="control-label" for="website-url">URL</label>
                    <div class="controls">
                        <input type="text"
                               ng-model="website.url"
                               class="input-xlarge"
                               id="website-url"
                               name="website-url"
                               value="{{website.url}}">
                    </div>
                </div>

                <h2>Institution (Work)</h2>

                <label class="control-label" for="title">Title</label>
                <div class="controls">
                    <input type="text"
                           ng-model="profile.workHistory[0].title"
                           class="input-xlarge"
                           id="title"
                           name="title"
                           value="{{profile.workHistory[0].title}}" required>
                </div>
                <br>

                <label class="control-label" for="location">Location</label>
                <div class="controls">
                    <input type="text"
                           ng-model="profile.workHistory[0].location"
                           class="input-xlarge"
                           id="location"
                           name="location"
                           value="{{profile.workHistory[0].location}}" required>
                </div>
                <br>

                <label class="control-label" for="institution-name">Institution Name</label>
                <div class="controls">
                    <input type="text"
                           ng-disabled=true
                           ng-model="profile.workHistory[0].businessName"
                           class="input-xlarge"
                           id="institution-name"
                           name="location"
                           value="{{profile.workHistory[0].businessName}}">
                </div>
                <br>
                <label class="control-label" for="work-institution-select-edit"></label>
                <div class="controls">
                    <input type="hidden"
                           ui-select2="selectConfig"
                           id="work-institution-select-edit"
                           ng-model="profile.workHistory[0].businessName"
                           ng-change="workInstitutionChangedEdit()"
                           name="work-institution-select-edit" >
                </div>
                <br>
                <br>
                <label class="control-label" for="year-started">Year Started</label>
                <div class="controls">
                    <input type="text"
                           ng-model="profile.workHistory[0].yearStarted.gregorian"
                           class="input-xlarge"
                           id="year-started"
                           name="year-finished"
                           value="{{profile.workHistory[0].yearStarted.gregorian}}" required>
                </div>
                <br>

                <label class="control-label" for="year-finished">Year Finished</label>
                <div class="controls">
                    <input type="text"
                           ng-model="profile.workHistory[0].yearFinished.gregorian"
                           class="input-xlarge"
                           id="year-finished"
                           name="year-finished"
                           value="{{profile.workHistory[0].yearFinished.gregorian}}">
                </div>

                <h2>
                    Education
                    <button class="btn btn-success" ng-click="addEdRow()">
                        <i class="icon-plus icon-white"></i> Add</button>
                </h2>

                <div class="well edu-history clearfix" ng-repeat="school in profile.educationHistory">
                    <label class="control-label" for="vitae-institution-name-{{$index}}">Institution Name</label>
                    <div class="controls">
                        <input type="text"
                               ng-model="school.schoolName"
                               ng-disabled=true
                               class="input-xlarge"
                               id="vitae-institution-name-{{$index}}"
                               name="vitae-institution-name-{{$index}}"
                               value="{{school.schoolName}}">
                    </div>
                    <br>
                    <label class="control-label" for="edu-institution-select-{{$index}}"></label>
                    <div class="controls">
                        <input type="hidden"
                               ui-select2="selectConfig"
                               id="edu-institution-select-{{$index}}"
                               ng-model="school.schoolName"
                               ng-change="eduInstitutionChangedEdit($index)"
                               name="edu-institution-select-{{$index}}">
                    </div>
                    <br>
                    <br>

                    <label class="control-label" for="degree">Degree</label>
                    <div class="controls">
                        <input type="text"
                               ng-model="school.degree"
                               class="input-xlarge"
                               id="degree"
                               name="degree"
                               value="{{school.degree}}" required>
                    </div>
                    <br>

                    <label class="control-label" for="field-of-study">Field Of Study</label>
                    <div class="controls">
                        <input type="text"
                               ng-model="school.fieldOfStudy"
                               class="input-xlarge"
                               id="field-of-study"
                               name="field-of-study"
                               value="{{school.fieldOfStudy}}" required>
                    </div>
                    <button class="btn btn-danger remove" ng-hide=$first ng-click="removeEdRow($index)">
                        <i class="icon-remove icon-white"></i> Remove</button>
                </div>
            </div>
        </fieldset>

        <hr>

        <h2>Profile Image</h2>

        <div id="update-upload" pykl-upload="{dropTarget:'drop-target-update', mode:'update'}">
            <img src="{{profile.thumbnail}}" id="drop-target-update" />
        </div>

        <div class="modal hide fade update">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h3>Crop your image</h3>
            </div>
            <div class="modal-body">
                <img id="image-crop-update" src="" alt="">

                <div style="width:250px;height:300px;overflow:hidden;margin-left:5px;">
                    <img id="crop-preview-update" src="" >
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancel-crop-update" class="btn btn-danger"><i class="icon-ban-circle icon-white"></i> Cancel</button>
                <button id="save-crop-update" class="btn btn-success"><i class="icon-ok icon-white"></i> Crop</button>
            </div>
        </div>

        <div id="container-update">
            <br>
            <div id="filelist-update"></div>
            <br />
            <button class="btn btn-primary" id="choose-files-update"><i class="icon-folder-open icon-white"></i> Browse</button>
            <!--<button class="btn btn-success" id="upload-files"><i class="icon-upload icon-white"></i> Upload files</button>-->
            <h3>Or you can Drag and Drop a file</h3>
        </div>

        <br><br>

        <hr>

        <button class="btn btn-success" ng-click="update(profile)" ng-disabled="editProfile.$invalid || isUnchanged(profile)">
            <i class="icon-pencil icon-white"></i> Update</button>
        <button class="btn btn-warning" ng-click="cancel()"><i class="icon-ban-circle icon-white"></i> Cancel</button>
    </form>

    <!--<pre>form = {{profile | json}}</pre>
    <pre>master = {{master | json}}</pre>
    <hr>
    <tt>editProfile.firstName.$valid = {{editProfile.firstName.$valid}}</tt><br>
    <tt>editProfile.firstName.$error = {{editProfile.firstName.$error}}</tt><br>
    <tt>editProfile.lastName.$valid = {{editProfile.lastName.$valid}}</tt><br>
    <tt>editProfile.lastName.$error = {{editProfile.lastName.$error}}</tt><br>
    <tt>editProfile.$valid = {{editProfile.$valid}}</tt><br>
    <tt>editProfile.$error.required = {{!!editProfile.$error.required}}</tt><br>
    <tt>editProfile.$error.minlength = {{!!editProfile.$error.minlength}}</tt><br>
    <tt>editProfile.$error.maxlength = {{!!editProfile.$error.maxlength}}</tt><br>-->
</div>

<div class="profile clearfix thumbnail" ng-show="isViewMode">
    <div class="profile-left">
        <img src="{{profile.thumbnail}}" alt="">

        <div class="caption">
            <!--<p>{{profile.bio}}</p>-->
            <p>
                <button class="btn" ng-click="edit(profile)"><i class="icon-edit"></i> Edit</button>
                <button class="btn btn-success" ng-click="create(profile)"><i class="icon-plus icon-white"></i> Create</button>
                <button class="btn btn-danger" ng-click="delete()"><i class="icon-trash icon-white"></i> Delete</button>
            </p>
        </div>

        <div class="alert alert-success" ng-show="wasProfileDeleted">
            <a class="close" data-dismiss="alert" href="#">×</a>
            <h4 class="alert-heading">Success!</h4> You have successfully deleted the profile of {{profile.firstName}} {{profile.lastName}}
        </div>
    </div>

    <div class="profile-right">
        <h6>{{profile._id}}</h6>
        <h2>{{profile.username}}</h2>
        <h6>Email</h6> {{profile.accountEmail.address}} <br>
    </div>
</div>

<div class="profile clearfix thumbnail" ng-show="isCreateMode">
    <form name="createProfile" class="form-horizontal" novalidate>
        <fieldset>
            <legend><h2>{{profile.name.given}} {{profile.name.surname}}</h2> <h6>{{profile._id}}</h6></legend>
            <div class="control-group">
                <h2>Basic</h2>
                <label class="control-label" for="username">Username</label>
                <div class="controls">
                    <input type="text"
                           ng-model="profile.username"
                           class="input-xlarge"
                           id="username"
                           name="username"
                           required
                           ng-minlength="3"
                           ng-maxlength="16"
                           value="">
                </div>
                <br>

                <label class="control-label" for="given-name">First Name</label>
                <div class="controls">
                    <input type="text"
                           ng-model="profile.name.given"
                           class="input-xlarge"
                           id="given-name"
                           name="given-name"
                           ng-minlength="3"
                           ng-maxlength="16"
                           required
                           value="">
                </div>
                <br>
                <label class="control-label" for="surname">Last Name</label>
                <div class="controls">
                    <input type="text"
                           ng-model="profile.name.surname"
                           class="input-xlarge"
                           id="surname"
                           name="surname"
                           ng-minlength="3"
                           ng-maxlength="16"
                           required
                           value="">
                </div>
                <br>
                <label class="control-label" for="password">Enter Password</label>
                <div class="controls">
                    <input type="password"
                           ng-model="profile.password"
                           class="input-xlarge"
                           id="password"
                           name="password"
                           ng-minlength="6"
                           ng-maxlength="16"
                           required
                           value="">
                </div>
                <br>
                <label class="control-label" for="repeat-password">Repeat Password</label>
                <div class="controls">
                    <input type="password"
                           ng-model="profile.newPassRepeat"
                           class="input-xlarge"
                           id="repeat-password"
                           name="repeat-password"
                           password-validator="password"
                           value="">
                </div>
                <br>

                <h2>
                    Contact
                    <button class="btn btn-success" ng-click="addContactRow()">
                        <i class="icon-plus icon-white"></i> Add</button>
                </h2>
                <label class="control-label" for="email">Email</label>
                <div class="controls">
                    <input type="email"
                           ng-model="profile.accountEmail.address"
                           ng-change="emailChanged()"
                           class="input-xlarge"
                           id="email"
                           name="address"
                           ng-minlength="3"
                           required
                           value="">
                </div>
                <br>

                <div class="well websites clearfix" ng-repeat="website in profile.websites">
                    <label class="control-label" for="website-title">Website Title</label>
                    <div class="controls">
                        <input type="text"
                               ng-model="website.title"
                               class="input-xlarge"
                               id="website-title"
                               name="website-title"
                               value="">
                    </div>
                    <br>
                    <label class="control-label" for="website-url">URL</label>
                    <div class="controls">
                        <input type="url"
                               ng-model="website.url"
                               class="input-xlarge"
                               id="website-url"
                               name="website-url"
                               ng-minlength="8"
                               value="">
                    </div>
                    <button class="btn btn-danger remove" ng-hide=$first ng-click="removeContactRow($index)">
                        <i class="icon-remove icon-white"></i> Remove</button>
                </div>

                <h2>Institution (Work History)</h2>

                <div class="well websites clearfix">
                    <label class="control-label" for="title">Title</label>
                    <div class="controls">
                        <input type="text"
                               ng-model="profile.workHistory[0].title"
                               class="input-xlarge"
                               id="title"
                               name="title"
                               ng-minlength="6"
                               ng-maxlength="16"
                               required
                               value="">
                    </div>
                    <br>

                    <label class="control-label" for="work-institution-create">Institution Name</label>
                    <div class="controls">
                        <input type="hidden"
                               ui-select2="selectConfig"
                               id="work-institution-create"
                               name="work-institution-create"
                               ng-model="workInstitutionCreate"
                               ng-change="workInstitutionChangedCreate()">
                    </div>
                    <br>

                    <label class="control-label" for="location">Location</label>
                    <div class="controls">
                        <input type="text"
                               ng-model="profile.workHistory[0].location"
                               class="input-xlarge"
                               id="location"
                               name="location"
                               ng-minlength="6"
                               ng-maxlength="16"
                               required
                               value="">
                    </div>
                    <br>

                    <label class="control-label" for="year-started">Year Started</label>
                    <div class="controls">
                        <input type="text"
                               ng-model="profile.workHistory[0].yearStarted.gregorian"
                               class="input-xlarge"
                               id="year-started"
                               name="year-finished"
                               required
                               ng-pattern="/^(19|20)\d{2}$/"
                               value="">
                    </div>
                    <br>

                    <label class="control-label" for="year-finished">Year Finished</label>
                    <div class="controls">
                        <input type="text"
                               ng-model="profile.workHistory[0].yearFinished.gregorian"
                               class="input-xlarge"
                               id="year-finished"
                               name="year-finished"
                               ng-pattern="/^(19|20)\d{2}$/"
                               ng-change="yearFinishedChanged()"
                               value="">
                    </div>
                </div>

                <h2>
                    Education
                    <button class="btn btn-success" ng-click="addEdRow()">
                        <i class="icon-plus icon-white"></i> Add</button>
                </h2>

                <div class="well edu-history clearfix" ng-repeat="school in profile.educationHistory">
                    <label class="control-label" for="edu-institution-create-{{$index}}">Institution Name</label>
                    <div class="controls">
                        <input type="hidden"
                               ui-select2="selectConfig"
                               id="edu-institution-create-{{$index}}"
                               ng-model="school.schoolName"
                               name="edu-institution-create-{{$index}}">
                    </div>
                    <br>

                    <label class="control-label" for="degree">Degree</label>
                    <div class="controls">
                        <input type="text"
                               ng-model="school.degree"
                               class="input-xlarge"
                               id="degree"
                               name="degree"
                               ng-minlength="6"
                               ng-maxlength="16"
                               required
                               value="">
                    </div>
                    <br>

                    <label class="control-label" for="field-of-study">Field Of Study</label>
                    <div class="controls">
                        <input type="text"
                               ng-model="school.fieldOfStudy"
                               class="input-xlarge"
                               id="field-of-study"
                               name="field-of-study"
                               ng-minlength="6"
                               ng-maxlength="16"
                               required
                               value="">
                    </div>
                    <br>

                    <label class="control-label" for="edu-country">Country</label>
                    <div class="controls">
                        <input type="text"
                               ng-model="school.country"
                               class="input-xlarge"
                               id="edu-country"
                               name="edu-country"
                               ng-minlength="6"
                               ng-maxlength="16"
                               required
                               value="">
                    </div>
                    <br>

                    <label class="control-label" for="edu-year-from">Year From</label>
                    <div class="controls">
                        <input type="text"
                               ng-model="school.yearFrom.gregorian"
                               class="input-xlarge"
                               id="edu-year-from"
                               name="edu-year-from"
                               ng-pattern="/^(19|20)\d{2}$/"
                               required
                               value="">
                    </div>
                    <br>

                    <label class="control-label" for="edu-year-to">Year To</label>
                    <div class="controls">
                        <input type="text"
                               ng-model="school.yearTo.gregorian"
                               class="input-xlarge"
                               id="edu-year-to"
                               name="edu-year-to"
                               ng-pattern="/^(19|20)\d{2}$/"
                               ng-change="yearToChanged()"
                               required
                               value="">
                    </div>
                    <br>

                    <label class="control-label" for="edu-notes">Notes</label>
                    <div class="controls">
                        <textarea
                               ng-model="school.edNotes"
                               class="input-xlarge"
                               id="edu-notes"
                               name="edu-notes"
                               value=""></textarea>
                    </div>
                    <button class="btn btn-danger remove" ng-hide=$first ng-click="removeEdRow($index)">
                        <i class="icon-remove icon-white"></i> Remove</button>
                </div>
            </div>
        </fieldset>

        <hr>

        <h2>Profile Image</h2>

        <div id="create-upload" pykl-upload="{dropTarget:'drop-target-create', mode:'create'}">
            <img src="//placehold.it/300x300" id="drop-target-create" />
        </div>

        <div class="modal hide fade create">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h3>Crop your image</h3>
            </div>
            <div class="modal-body">
                <img id="image-crop-create" src="" alt="">

                <div style="width:250px;height:300px;overflow:hidden;margin-left:5px;">
                    <img id="crop-preview-create" src="" >
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancel-crop-create" class="btn btn-danger"><i class="icon-ban-circle icon-white"></i> Cancel</button>
                <button id="save-crop-create" class="btn btn-success"><i class="icon-ok icon-white"></i> Crop</button>
            </div>
        </div>

        <div id="container-create">
            <br>
            <div id="filelist-create"></div>
            <br />
            <button class="btn btn-primary" id="choose-files-create"><i class="icon-folder-open icon-white"></i> Browse</button>
            <!--<button class="btn btn-success" id="upload-files"><i class="icon-upload icon-white"></i> Upload files</button>-->
            <h3>Or you can Drag and Drop a file</h3>
        </div>

        <br><br>

        <hr>

        <button class="btn btn-success" ng-click="save(profile)" ng-disabled="createProfile.$invalid">
            <i class="icon-folder-open icon-white"></i> Save</button>
        <button class="btn btn-warning" ng-click="cancel()"><i class="icon-ban-circle icon-white"></i> Cancel</button>
    </form>


    <!--<pre>form = {{createProfile | json}}</pre>
    <tt>createProfile.firstName.$valid = {{createProfile.firstName.$valid}}</tt><br>
    <tt>createProfile.firstName.$error = {{createProfile.firstName.$error}}</tt><br>
    <tt>createProfile.email.$valid = {{createProfile.email.$valid}}</tt><br>
    <tt>createProfile.email.$error = {{createProfile.email.$error}}</tt><br>
    <tt>createProfile.$valid = {{createProfile.$valid}}</tt><br>-->
</div>